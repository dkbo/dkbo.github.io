(function(){var e,t,n,a,c,i,s,o,v,d,h,u,r,l,m,g;for(e=function(e){this.canvas=document.getElementById(e.canvasID),this.ctx=this.canvas.getContext("2d"),this.canvas.style.width=e.styleWidth?e.styleWidth:"100%",this.canvas.style.height=e.styleHeight?e.styleHeight:"100%",this.canvasID=e.canvasID,this.canvas.width=e.width?e.width:300,this.canvas.height=e.height?e.height:150,this.canvasWidth=this.canvas.width,this.canvasHeight=this.canvas.height},u=function(){var e,t,n;return n=document.getElementById("red").value,t=document.getElementById("green").value,e=document.getElementById("blue").value,"rgb("+n+","+t+","+e+")"},n=function(){var e;e=u(),document.getElementById("colorbox").style.backgroundColor=e},v=function(e,t,n){var a,c,i;i=u(),a=document.getElementById("pensize").value,c=document.getElementById("penstyle").value,e.strokeStyle=i,e.lineTo(t,n),e.lineWidth=a,e.lineCap=c,e.stroke()},a=function(e,t){var n;return n=e.canvas.getBoundingClientRect(),{x:(t.clientX-n.left)*e.canvasWidth/n.width,y:(t.clientY-n.top)*e.canvasHeight/n.height}},c=function(e,t){var n;return n=e.canvas.getBoundingClientRect(),{x:(t.changedTouches[0].clientX-n.left)*e.canvasWidth/n.width,y:(t.changedTouches[0].clientY-n.top)*e.canvasHeight/n.height}},s=function(e){var t;t=a(o,e),v(o.ctx,t.x,t.y)},l=function(e){var t;t=c(o,e),v(o.ctx,t.x,t.y)},d=function(e){var t;t=document.getElementById(h[e]),t.addEventListener("mousedown",function(){t.addEventListener("mousemove",n,!1)},!1),t.addEventListener("mouseup",function(){n(),t.removeEventListener("mousemove",n,!1)},!1),t.addEventListener("touchstart",function(){n(),t.addEventListener("touchmove",n,!1)},!1),t.addEventListener("touchend",function(){t.removeEventListener("touchmove",n,!1)},!1)},o={canvasID:"canvas",width:900,height:450},o=new e(o),m=0,g=0,o.canvas.addEventListener("mousedown",function(e){var t;t=a(o,e),o.ctx.beginPath(),o.ctx.moveTo(t.x,t.y),o.canvas.addEventListener("mousemove",s,!1)},!1),o.canvas.addEventListener("mouseup",function(){o.canvas.removeEventListener("mousemove",s,!1)},!1),o.canvas.addEventListener("touchstart",function(e){var t;t=c(o,e),o.ctx.beginPath(),o.ctx.moveTo(t.x,t.y),o.canvas.addEventListener("touchmove",l,!1)},!1),o.canvas.addEventListener("touchend",function(){o.canvas.removeEventListener("touchmove",l,!1)},!1),r=document.getElementById("save"),t=document.getElementById("clear"),r.addEventListener("click",function(){var e;e=o.canvas.toDataURL("image/png"),r.href=e}),t.addEventListener("click",function(){confirm("Confirm Clear?")&&o.ctx.clearRect(0,0,o.canvasWidth,o.canvasHeight)}),n(),h=["red","green","blue"],i=0;i<h.length;)d(i),i++}).call(this);